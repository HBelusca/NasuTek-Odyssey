
set(GLOBAL_FILES infcore.c infget.c infput.c)

if(CMAKE_CROSSCOMPILING)
    file(GLOB_RECURSE SOURCE "infros*.c")
    add_library(inflib ${GLOBAL_FILES} ${SOURCE})
    add_dependencies(inflib psdk)
else()
    file(GLOB_RECURSE SOURCE "infhost*.c")
    add_definitions(-D__NO_CTYPE_INLINES -DINFLIB_HOST)
    if(NOT MSVC)
        add_definitions(-Wpointer-arith -Wconversion -Wstrict-prototypes -Wmissing-prototypes)
    endif()
    add_library(inflibhost ${GLOBAL_FILES} ${SOURCE})
endif()
